# プロジェクト構造

このプロジェクトは、単一ファイルから複数ファイルに分割して管理されています。

## ディレクトリ構造

```
src/
├── config.py              # 設定と定数
├── tello_controller.py    # Telloドローン制御クラス
├── scratch_parser.py      # Scratchプロジェクト解析クラス
├── show_runner.py         # ドローンショー実行ロジック
├── gui/
│   ├── __init__.py
│   └── main_window.py     # GUIアプリケーション
├── main.py                # アプリケーションエントリーポイント
└── tello_gui_app.py       # (旧) 単一ファイル版（互換性のため残存）
```

## 各ファイルの役割

### `config.py`
アプリケーション全体で使用される定数と設定を定義します。
- Tello設定（速度、移動量など）
- GUI設定（フォント、色など）
- ネットワーク設定

### `tello_controller.py`
Telloドローンとの通信を管理します。
- UDPソケットによる通信
- コマンド送信と応答受信
- エラーハンドリング

### `scratch_parser.py`
Scratchプロジェクトファイル(.sb3)を解析します。
- プロジェクトファイルの読み込み
- ブロックの解析
- Telloコマンドへの変換
- タイムラインの生成

### `show_runner.py`
ドローンショーの実行ロジックを提供します。
- 複数ドローンの同期制御
- スケジュールに基づいた実行
- エラーハンドリングとクリーンアップ

### `gui/main_window.py`
GUIアプリケーションのメインウィンドウです。
- Tkinterベースのユーザーインターフェース
- ドローン設定管理
- Scratchファイル選択と解析
- ショーの実行制御

### `main.py`
アプリケーションのエントリーポイントです。
- DPI設定（Windows）
- GUIの初期化と起動

## 実行方法

### 新しいバージョン（推奨）
```bash
cd src
python main.py
```

### 旧バージョン（互換性維持）
```bash
cd src
python tello_gui_app.py
```

## 開発のメリット

### 保守性の向上
- 各モジュールが独立しているため、変更が容易
- 責務が明確に分離されている
- テストが書きやすい

### 可読性の向上
- 各ファイルが適切なサイズ
- 機能ごとに整理されている
- コメントとdocstringが充実

### 拡張性の向上
- 新機能の追加が容易
- 既存コードへの影響を最小化
- プラグインアーキテクチャへの移行が可能

## 今後の改善案

1. **テストの追加**
   - 各モジュールのユニットテスト
   - 統合テスト

2. **ログシステムの改善**
   - loggingモジュールの使用
   - ファイルへのログ出力

3. **設定ファイルの拡張**
   - YAML/TOMLサポート
   - より柔軟な設定

4. **エラーハンドリングの強化**
   - カスタム例外クラス
   - より詳細なエラーメッセージ

5. **ドキュメントの充実**
   - API仕様書
   - 開発者ガイド
   - ユーザーマニュアル
